#!/usr/bin/env python3
"""Mock sprio command for testing."""

from __future__ import annotations

import argparse

# Mock pending job priority data
# Format: (JobID, User, Account, Priority, Age, FairShare, JobSize, Partition, QOS)
MOCK_SPRIO_DATA = [
    ("47441", "user1", "physics", "1500", "100", "800", "200", "300", "100"),
    ("47434", "user1", "physics", "1400", "80", "750", "200", "270", "100"),
    ("47537", "user5", "biology", "1300", "120", "900", "150", "80", "50"),
    ("47670", "user6", "chemistry", "1200", "90", "650", "180", "200", "80"),
    ("47671", "user6", "chemistry", "1100", "85", "600", "180", "175", "60"),
    ("47700_[0-49]", "testuser", "physics", "1000", "50", "500", "100", "250", "100"),
    ("47701_[0-99%10]", "testuser", "physics", "900", "40", "450", "80", "230", "100"),
]


def main() -> None:
    """Main entry point for mock sprio command."""
    parser = argparse.ArgumentParser()
    parser.add_argument("-o", "--format", default=None, help="Output format")
    parser.add_argument("-j", "--jobs", default=None, help="Specific job IDs")
    parser.add_argument("-u", "--users", default=None, help="Specific users")
    parser.add_argument("--noheader", action="store_true", help="No header")

    args = parser.parse_args()

    data = list(MOCK_SPRIO_DATA)

    # Filter by job if specified
    if args.jobs:
        job_ids = args.jobs.split(",")
        data = [row for row in data if row[0].split("_")[0] in [j.split("_")[0] for j in job_ids]]

    # Filter by user if specified
    if args.users:
        users = args.users.split(",")
        data = [row for row in data if row[1] in users]

    # Output in pipe-delimited format (matching our custom format string)
    for row in data:
        # Pad fields to match the format string width
        job_id, user, account, priority, age, fairshare, jobsize, partition, qos = row
        print(f"{job_id}|{user}|{account}|{priority}|{age}|{fairshare}|{jobsize}|{partition}|{qos}")


if __name__ == "__main__":
    main()
